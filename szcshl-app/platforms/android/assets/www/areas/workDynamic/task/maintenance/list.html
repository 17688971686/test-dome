<ion-view title="设施维修列表({{count||0}})" class="{{viewMainClass}}">
	<ion-nav-bar class="bar-positive">
		<ion-nav-buttons side="left">
			<button ng-click="back()" class="button back-button buttons button-clear header-item">
            	<i class="icon ion-android-arrow-back"></i> </button>
		</ion-nav-buttons>
		<ion-nav-buttons side="right">
			<a href="#/office/newMaintenanceProce/" class="button back-button buttons button-clear header-item">新增</a>
		</ion-nav-buttons>
	</ion-nav-bar>
	<!--<div class="bar bar-subheader bg_EEEEEE min_he_30px">
		<div class="width_100">
			<div class="width_5 float_l">&nbsp;</div>
			<div class="bor_input float_l width_65 text-right">
				<div class="width_90 float_l"><input ng-model="condition.search" class="width_100 not_border not_bgColor" placeholder="搜索"></div>
				<div class="width_10  float_l"><a ng-click="condition.search=''" ng-show="condition.search"><i class="icon ion-close-circled color_delete"></i></a></div>
				<div class="clear_l"></div>
			</div>
			<div class="width_15 float_l text-center"><a ng-click="query(condition.search);show_list = false">&nbsp;<i class="icon ion-search">搜索</i></a></div>
			<div class="width_15 float_l"><a ng-click="handoverPage();"><i class="icon ion-shuffle">筛选</i></a></div>
			<div class="clear_l"></div>
		</div>
	</div>-->
	<ion-content>
		<!--<div class="height_30px">&nbsp;</div>-->
		<ion-refresher pulling-text="获取最新数据..." refreshing-text="刷新完毕" on-refresh="doRefresh()"></ion-refresher>
	<div ng-if="!show_list">
		<div class="bg_EEEEEE size_min">
			<div class="float_l bg_7CC4E7 margin_5px" ng-show="procName_show">{{procName_show}}</div>
			<div class="float_l bg_7CC4E7 margin_5px" ng-show="streetName_show">{{streetName_show}}</div>
			<div class="float_l bg_7CC4E7 margin_5px" ng-show="condition.startTime">{{condition.startTime}}以后</div>
			<div class="float_l bg_7CC4E7 margin_5px" ng-show="condition.endTime">{{condition.endTime}}以前</div>
			<div class="clear_l"></div>
		</div>
		<!--列表-->
		<ion-list class="project-list">
			<a class="item item-icon-right" ng-repeat="x in list | orderBy: '-createdDate'" href="#/office/newMaintenanceProce/{{x.repairRegisterId}}">
				<div class="list-icon">
					<img src="./img/theme/icon8.png" />
				</div>
				<div class="list-content">
					<div class="list-box">
				
						<i class="icon ion-chevron-right icon-accessory"></i>
						<h2>{{x.repairTitle}}</h2>
						<div class="size_ss text_color_f5">
						<div class="width_55">{{x.siteInfo.siteName}}</div>
						<div class="width_35 float_l"><span style="color: #999999; margin-right: 10px;"><img src="./img/theme/icon5.png" />  &nbsp;  {{x.createdDate}}</span> {{x.stateValue}}</div>
						
						<div class="clear_b"></div>
						</div>
					</div>
				</div>	
			</a>
		</ion-list>
		<!--没有更多数据时候的用户提示-->
		<div class="padding"></div>
		<div ng-hide="moreDataCanBeLoaded" style="text-align: center">
			<span>到底了，没有更多数据了！</span>
		</div>
		<ion-infinite-scroll ng-if="moreDataCanBeLoaded" on-infinite="loadData()" distance="1%"></ion-infinite-scroll>
	</div>
	<div ng-if="show_list" class="">
		<div class="bg">
			<div class="width_100 text-center">
				<p></p><div class="button-bar bar-balanced size_s">
			          <a class="button button-small bg-white" ng-click="setStartTime()">最小时间：{{temp.startTime||'不限'}}</a>
			          <a class="button button-small bg-white" ng-click="setEndTime()">最大时间：{{temp.endTime||'不限'}}</a>
			        </div>
			    <p></p>
			</div>
		</div>
		<div class="width_100">流程</div>
		<div>
			<div class="width_33 float_l text-center padding_3px" ng-repeat="i in procList">
				<div class="radius_3px size_ss height_35px border_1px bor_2DA4FF {{$index == selectProcIndex ? 'bg-red' :'bg-white'}}" ng-click="selectProc(i, $index)">{{i.NAME_}}</div>
			</div>
			<div class="clear_b"></div>
		</div>
		<div class="width_100">街道</div>
		<div>
			<div class="width_33 float_l text-center padding_3px" ng-repeat="x in streetDtos">
				<div class="radius_5px size_ss height_35px border_1px bor_DDDDDD {{$index == selectStreetIndex ? 'bg-red' :'bg-white'}}" ng-click="selectStreet(x, $index)">{{x.streetName}}</div>
			</div>
			<div class="clear_b"></div>
		</div>
		<div class="bar bar-footer bg_EEEEEE">
			<button class="button button-calm button-small width_50" ng-click="screen();handoverPage();">确定</button>
			<button class="button button-calm button-small width_50" ng-click="reset()">重置</button>
	    </div>
	</div>
	</ion-content>
</ion-view>