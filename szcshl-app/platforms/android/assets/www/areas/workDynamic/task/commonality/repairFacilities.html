<!--维修设备列表 ===============begin=============0===========================================================-->
<div ng-show="facility_page == 0">
	<!--查看维修设施-->
	<!--<div class="item text-center bg_9BE1FA">
		费用合计：
		<span ng-hide="cost>10000">{{cost}}元</span>
		<span style="color: red;" ng-show="cost>10000">{{cost}}元&nbsp;&nbsp;&nbsp;超过10000元需要审核</span>
	</div>-->
	<div class="item text-center bg_9BE1FA" ng-show="cost>10000">
		<span style="color: red;">费用超出系统要求范围，请先提交审核再维修</span>
	</div>
	<ion-list class="project-list">
		<a class="item item-icon-right" ng-repeat="x in model.repairFacilitiDtos | orderBy:'repairFacilityId'" ng-click="_TEMP_.repairFacilitiDtos = x;swichFacilityPage(5)">
			<i class="icon ion-chevron-right icon-accessory"></i>
			<div class="size_ss">
				<div class="width_65 float_l">{{x.equipMentDto.equipMentName || x.facilityName}}&nbsp;&nbsp;&nbsp;{{x.facilityNumber}}</div>
				<!--<div class="width_35 float_l">费用：{{x.cost}}元</div>-->
				<div class="clear_b"></div>
			</div>
		</a>
	</ion-list>
	<p></p>
	<div class="button-bar bar-light">
		<a class="button button-small" ng-click="addFacility()"><i class="icon ion-plus-circled"></i> 添加维修设施</a>
	</div>
	<p></p>
	<p></p>
	<div class="button-bar bar-light">
		<a class="button button-small" ng-click="addFacilitybasicdata()" href="">新增场地设施</a>
	</div>
	<p></p>
</div>
<!--维修设备列表 ===============end=============0===========================================================-->
<!--维修设施展开================================5===========================================================-->
<div ng-show="facility_page == 5">
	<!--<ion-list class="project-list">-->
	<div class="item text-center bg_9BE1FA" ng-show="cost>10000">
		<span style="color: red;">费用超出系统要求范围，请先提交审核再维修</span>
	</div>
	<label class="item">
		<div style="width: 100%;text-align: center;">
			{{_TEMP_.repairFacilitiDtos.facilityName || _TEMP_.repairFacilitiDtos.equipMentDto.equipMentName}}
			&nbsp;&nbsp;&nbsp;{{_TEMP_.repairFacilitiDtos.facilityNumber}}
		</div>
	</label>
	<!--<div class="text-center  height_30px">维修细项列表({{_TEMP_.repairFacilitiDtos.repairItemDto.length}})</div>-->
	<ion-list class="project-list">
		<div ng-repeat="x in _TEMP_.repairFacilitiDtos.repairItemDto  | orderBy:'repairItemId'" class="item item-icon-right size_ss {{$index %2 == 0 ? 'odd':'even'}}" ng-click="_TEMP_.repairItemDto = x;swichFacilityPage(1)">
			<i class="icon ion-chevron-right icon-accessory"></i>
			<div>
				<div class="size_ss" ng-click="">
					<div class="width_50 float_l">&nbsp;分类：{{x.repairType}}</div>
					<div class="width_50 float_l">&nbsp;名称：{{x.repairMplName}}</div>
					<div class="width_50 float_l">&nbsp;数量：{{x.repairNumber}}{{x.repairUnit}}</div>
					<!--<div class="width_100 float_l">&nbsp;费用：{{x.repairUnitPrice}}元/{{x.repairUnit}}&nbsp;&nbsp;x&nbsp;&nbsp;{{x.repairNumber}}{{x.repairUnit}}&nbsp;&nbsp;=&nbsp;&nbsp;{{x.repairUnitPrice*x.repairNumber}}元</div>-->
					<div class="width_100 clear_b">&nbsp;备注：{{x.remark}}</div>
				</div>
			</div>
		</div>
	</ion-list>
	<!--添加维修细项 ---按钮-----------------------------button---------------------------------------->
	<div class="row">
		<p></p>
		<div class="button-bar bar-light">
			<a class="button button-small" ng-click="model.repairFacilitiDtos.removeByValue(_TEMP_.repairFacilitiDtos);swichFacilityPage(0)" style="color: red;"><i class="icon ion-close-circled"></i> 删除维修设施</a>
			<a class="button button-small button-calm" ng-click="_TEMP_.repairItemDto = {};swichFacilityPage(3)"><i class="icon ion-plus-circled"></i> 添加维修细项</a>
			<p></p>
		</div>
	</div>
</div>
<!--查看维修设施 end================查看维修设施end==============================================================================-->
<!--维修细项  查看=============================1==========================================================================================-->
<div ng-show="facility_page == 1">
	<label class="item">
		          	<div style="width: 100%;text-align: center;">查看维修细项</div>
		        </label>
	<label class="item">
		          	分类：{{_TEMP_.repairItemDto.repairType}}
		        </label>
	<label class="item">
		          	名称：{{_TEMP_.repairItemDto.repairMplName}}
		        </label>
	<!--<label class="item">
		          	单价：{{_TEMP_.repairItemDto.repairUnitPrice}}元/{{_TEMP_.repairItemDto.repairUnit}}
		        </label>-->
	<label class="item">
		          	数量：{{_TEMP_.repairItemDto.repairNumber}}{{_TEMP_.repairItemDto.repairUnit}}
		        </label>
	<!--<label class="item">
		          	费用：{{_TEMP_.repairItemDto.repairNumber*_TEMP_.repairItemDto.repairUnitPrice}}元
		        </label>-->
	<div class="row bg-white">
		<div class="col size_s">&nbsp;&nbsp;备注：{{_TEMP_.repairItemDto.remark}}</div>
	</div>
	<div class="row">
		<div class="col-50" style="border: 1px solid #11C1F3;background-color: white;text-align: center;" id="list_left">
			<span class="text">维修前图片：</span>
			<span ng-repeat="x in _TEMP_.repairItemDto.fileList|filter:{fileType:1}" style="border: 1px solid #000000;" ng-if="x.fileType == 1">
		        <a ng-click="showImg((_TEMP_.repairItemDto.fileList|filter:{fileType:1}),$index)">
		        	<img ng-src="{{x.fileUrl.length > 750 ? '' : (rootPath+'/downLoad/')}}{{x.fileUrl}}" width='100%' alt="{{x.showName}}" />
		        </a>
		    </span>
		</div>
		<div class="col-50" style="border: 1px solid #11C1F3;background-color: white;text-align: center;" id="list_rigth">
			<span class="text">维修后图片：</span>
			<span ng-repeat="x in _TEMP_.repairItemDto.fileList|filter:{fileType:2}" style="border: 1px solid #000000;" ng-if="x.fileType == 2">
				<a ng-click="showImg((_TEMP_.repairItemDto.fileList|filter:{fileType:2}),$index)">
		        			<img ng-src="{{x.fileUrl.length > 750 ? '' : (rootPath+'/downLoad/')}}{{x.fileUrl}}" width='100%' alt="{{x.showName}}"/>
		        </a>
			</span>
		</div>
	</div>
	<p></p>
	<div class="button-bar bar-light">
		<a class="button button-small" ng-click="_TEMP_.repairFacilitiDtos.repairItemDto.splice(_TEMP_.repairFacilitiDtos.repairItemDto.indexOf(_TEMP_.repairItemDto),1);swichFacilityPage(5)" style="color: red;"><i class="icon ion-close-circled"></i> 删除</a>
		<a class="button button-small button-calm" ng-click="cloneRepairItems(_TEMP_.repairItemDto);swichFacilityPage(2)"><i class="icon ion-edit"></i> 编辑</a>
		<p></p>
	</div>
</div>
<!--维修细项  编辑-----------------======================2======================================================================-->
<div ng-show="facility_page == 2">
	<label class="item">
		          	<div style="width: 100%;text-align: center;">编辑维修细项</div>
		        </label>
	<label class="item item-select">
	          	分类：
	          	<select ng-model="_TEMP_.repairItemDto.repairType" ng-change="changeMplType(_TEMP_.repairItemDto.repairType)">
	          		<option value="" id="add_repairItems_type_qxz">请选择</option>
	          		<option ng-repeat="dict in  _TEMP_.DICT">{{dict.dictName}}</option>
		        </select>
	        </label>
	<label class="item item-select">
	          	名称：
	          	<select ng-model="_TEMP_.repairItemDto.repairMplName" ng-change="changeMplName(_TEMP_.repairItemDto.repairMplName);">
	          		<option value="" id="add_repairItems_name_qxz">请选择</option>
	          		<option ng-repeat="mpl in _TEMP_.mpls">{{mpl.mplName}}</option>
	          	</select>
	        </label>
	<!--<label class="item" style="text-align: right;">
	          	单价：<div align="right" style="width: 100%;">{{_TEMP_.repairItemDto.repairUnitPrice}}元/{{_TEMP_.repairItemDto.repairUnit}}&nbsp;&nbsp;&nbsp;</div>
	        </label>-->
	<div class="item item-input">
		数量（单位：{{_TEMP_.repairItemDto.repairUnit}}）：
		<input type="number" ng-model="_TEMP_.repairItemDto.repairNumber" style="display: inline;" placeholder="请输入大于0的数"
		        	ng-keyup="_TEMP_.repairItemDto.repairNumber=(_TEMP_.repairItemDto.repairNumber<0?'':_TEMP_.repairItemDto.repairNumber)">
		<!--<div class="row">
			<div class="col-60">数量（单位：{{_TEMP_.repairItemDto.repairUnit}}）：</div>
			<div class="col-40">
				<button class="button button-small button-positive ion-minus" 
						ng-click="_TEMP_.repairItemDto.repairNumber = _TEMP_.repairItemDto.repairNumber > 1 ? _TEMP_.repairItemDto.repairNumber-1 : 1"></button>
		          	<input type="number" ng-model="_TEMP_.repairItemDto.repairNumber" class="width_50" style="display: inline;border: 1px solid silver;" 
		          		onkeyup="this.value=this.value.replace( /\D/g,'')" onafterpaste="this.value=this.value.replace( /\D/g,'')">
		          	<button class="button button-small button-positive ion-plus" 
		          		ng-click="_TEMP_.repairItemDto.repairNumber = _TEMP_.repairItemDto.repairNumber+1"></button>
			</div>
		</div>-->
	</div>
	<label class="item">
		<textarea ng-model="_TEMP_.repairItemDto.remark" rows="4" maxlength="200" placeholder="备注" class="textarea_w_h"></textarea>
	</label>
	<div class="row size_s">
		<div class="col-50" style="border: 1px solid #11C1F3;background-color: white;text-align: center;">
			<span class="text">维修前图片：</span>
			<span style="background-color: #4CD964;" ng-click="addRepairItemPic(1, _TEMP_.repairItemDto);">&nbsp;<i class="icon ion-plus-circled"></i>&nbsp;添加&nbsp;</span>
			<div>
				<div class='po_relative' ng-repeat="x in _TEMP_.repairItemDto.fileList|filter:{fileType:1}" id="{{'list_' + x.fileId}}">
					<a ng-click="showImg((_TEMP_.repairItemDto.fileList|filter:{fileType:1}),$index)">
						<img ng-src="{{x.fileUrl.length > 750 ? '' : (rootPath+'/downLoad/')}}{{x.fileUrl}}" width='100%' />
						<a class='ioc_rigth_top' ng-click="deleteRepairItemPic(x, _TEMP_.repairItemDto);"><i class='icon ion-close-circled' style='font-size: 23px;'></i></a>
					</a>
				</div>
			</div>
		</div>
		<div class="col-50" style="border: 1px solid #11C1F3;background-color: white;text-align: center;">
			<span class="text">维修后图片：</span>
			<span style="background-color: #4CD964;" ng-click="addRepairItemPic(2, _TEMP_.repairItemDto);">&nbsp;<i class="icon ion-plus-circled"></i>&nbsp;添加&nbsp;</span>
			<div>
				<div class='po_relative bl' ng-repeat="x in _TEMP_.repairItemDto.fileList|filter:{fileType:2}" id="{{'list_' + x.fileId}}">
					<a ng-click="showImg((_TEMP_.repairItemDto.fileList|filter:{fileType:2}),$index)">
						<img ng-src="{{x.fileUrl.length > 750 ? '' : (rootPath+'/downLoad/')}}{{x.fileUrl}}" width='100%' />
						<a class='ioc_rigth_top' ng-click="deleteRepairItemPic(x, _TEMP_.repairItemDto);"><i class='icon ion-close-circled' style='font-size: 23px;'></i></a>
					</a>
				</div>
			</div>
		</div>
	</div>
	<p></p>
	<div class="button-bar bar-light">
		<a class="button button-small button-positive" ng-disabled="!(_TEMP_.repairItemDto.repairType && _TEMP_.repairItemDto.repairMplName && _TEMP_.repairItemDto.repairNumber
			&& (_TEMP_.repairItemDto.fileList|filter:{fileType:1}).length>0 && (_TEMP_.repairItemDto.fileList|filter:{fileType:2}).length>0)" 
		ng-click="swichFacilityPage(1)"><i class="icon ion-checkmark-round"></i> 保存编辑</a>
		<a class="button button-small button-positive" ng-click="restoreRepairItems(_TEMP_.repairItemDto);swichFacilityPage(1)">
			<i class="icon ion-arrow-return-left"></i> 取消编辑</a>
		<p></p>
	</div>
</div>
<!--维修细项  新增-------------------------============3========================================================================-->
<div ng-show="facility_page == 3" class="repairItemDto">
	<label class="item">
	          	<div style="width: 100%;text-align: center;">添加维修细项</div>
	        </label>
	<label class="item item-select">
	          	分类：
	          	<select ng-model="_TEMP_.repairItemDto.repairType" ng-change="changeMplType(_TEMP_.repairItemDto.repairType)">
	          		<option value="" id="add_repairItems_type_qxz">请选择</option>
	          		<option ng-repeat="dict in  _TEMP_.DICT">{{dict.dictName}}</option>
		        </select>
	        </label>
	<label class="item item-select">
	          	名称：
	          	<select ng-model="_TEMP_.repairItemDto.repairMplName" ng-change="changeMplName(_TEMP_.repairItemDto.repairMplName);">
	          		<option value="" id="add_repairItems_name_qxz">请选择</option>
	          		<option ng-repeat="mpl in _TEMP_.mpls">{{mpl.mplName}}</option>
	          	</select>
	        </label>
	<!--<label class="item item-input text-right">
	          	单价：<div class="width_100 text-right">{{_TEMP_.repairItemDto.repairUnitPrice}}元/{{_TEMP_.repairItemDto.repairUnit}}&nbsp;&nbsp;&nbsp;</div>
	        </label>-->
	<div class="item item-input">
		数量（单位：{{_TEMP_.repairItemDto.repairUnit}}）：
		<input type="number" ng-model="_TEMP_.repairItemDto.repairNumber" style="display: inline;" placeholder="请输入大于0的数"
		        	ng-keyup="_TEMP_.repairItemDto.repairNumber=(_TEMP_.repairItemDto.repairNumber<0?'':_TEMP_.repairItemDto.repairNumber)">
		<!--<div class="row">
			<div class="col-60">数量（单位：{{_TEMP_.repairItemDto.repairUnit}}）：</div>
			<div class="col-40 item-input">
				<button class="button button-small button-positive ion-minus" 
						ng-click="_TEMP_.repairItemDto.repairNumber = _TEMP_.repairItemDto.repairNumber > 1 ? _TEMP_.repairItemDto.repairNumber-1 : (_TEMP_.repairItemDto.repairNumber>0?_TEMP_.repairItemDto.repairNumber:0)"></button>
		        <input type="number" ng-model="_TEMP_.repairItemDto.repairNumber" class="width_50" style="display: inline;" placeholder="请输入"
		        	ng-keyup="_TEMP_.repairItemDto.repairNumber=(_TEMP_.repairItemDto.repairNumber>0?_TEMP_.repairItemDto.repairNumber:0-_TEMP_.repairItemDto.repairNumber)">
		        <button class="button button-small button-positive ion-plus" 
		          		ng-click="_TEMP_.repairItemDto.repairNumber = _TEMP_.repairItemDto.repairNumber+1"></button>
			</div>
		</div>-->
	</div>
	<label class="item">
	    <textarea ng-model="_TEMP_.repairItemDto.remark" rows="4" maxlength="200" placeholder="备注" class="textarea_w_h"></textarea>
	</label>
	<div class="row size_s">
		<div class="col-50" style="border: 1px solid #11C1F3;background-color: white;text-align: center;">
			<span class="text">维修前图片：</span>
			<span style="background-color: #4CD964;" ng-click="addRepairItemPic(1, _TEMP_.repairItemDto);">&nbsp;<i class="icon ion-plus-circled"></i>&nbsp;添加&nbsp;</span>
			<div>
				<div class='po_relative bor_t_1px' ng-repeat="x in _TEMP_.repairItemDto.fileList|filter:{fileType:1}">
					<a ng-click="showImg((_TEMP_.repairItemDto.fileList|filter:{fileType:1}),$index)">
						<img ng-src="{{x.fileUrl.length > 750 ? '' : (rootPath+'/downLoad/')}}{{x.fileUrl}}" width='100%' />
						<a class='ioc_rigth_top' ng-click="deleteRepairItemPic(x, _TEMP_.repairItemDto);"><i class='icon ion-close-circled' style='font-size: 23px;'></i></a>
					</a>
				</div>
			</div>
		</div>
		<div class="col-50" style="border: 1px solid #11C1F3;background-color: white;text-align: center;">
			<span class="text">维修后图片：</span>
			<span style="background-color: #4CD964;" ng-click="addRepairItemPic(2, _TEMP_.repairItemDto);">&nbsp;<i class="icon ion-plus-circled"></i>&nbsp;添加&nbsp;</span>
			<div>
				<div class='po_relative bor_t_1px' ng-repeat="x in _TEMP_.repairItemDto.fileList|filter:{fileType:2}">
					<a ng-click="showImg((_TEMP_.repairItemDto.fileList|filter:{fileType:2}),$index)">
						<img ng-src="{{x.fileUrl.length > 750 ? '' : (rootPath+'/downLoad/')}}{{x.fileUrl}}" width='100%' />
						<a class='ioc_rigth_top' ng-click="deleteRepairItemPic(x, _TEMP_.repairItemDto);"><i class='icon ion-close-circled' style='font-size: 23px;'></i></a>
					</a>
				</div>
			</div>
		</div>
	</div>
	<p></p>
	<div class="button-bar bar-light">
		<a class="button button-small button-positive" 
			ng-disabled="!(_TEMP_.repairItemDto.repairType && _TEMP_.repairItemDto.repairMplName && _TEMP_.repairItemDto.repairNumber 
			&& (_TEMP_.repairItemDto.fileList|filter:{fileType:1}).length>0 && (_TEMP_.repairItemDto.fileList|filter:{fileType:2}).length>0)" 
			ng-click="_TEMP_.repairFacilitiDtos.repairItemDto.push(_TEMP_.repairItemDto);swichFacilityPage(5)"><i class="icon ion-checkmark-round"></i> 确定添加</a>
		<a class="button button-small button-positive" ng-click="swichFacilityPage(5)"><i class="icon ion-arrow-return-left"></i> 取消添加</a>
		<p></p>
	</div>
</div>