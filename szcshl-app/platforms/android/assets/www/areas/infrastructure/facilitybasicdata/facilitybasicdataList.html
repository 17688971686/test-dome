<!--设施列表-->
<ion-view class="{{viewMainClass}}">
<ion-content>
	<ion-refresher pulling-text="获取最新数据..." refreshing-text="刷新完毕" on-refresh="doRefreshFacility()"></ion-refresher>
	<div class="row" ng-hide="show_index==4">
		<div class="col">
			<div class="width_100 float_l search-custom">
				<div class="width_5 float_l">&nbsp;</div>
				<div class="width_75 float_l"><input ng-model="facility_data.search" class="width_100 not_border not_bgColor" placeholder="搜索"></div>
				<div class="width_10  float_l">
					<a ng-click="facility_data.search=''"><i class="icon ion-close-circled color_delete" ng-show="facility_data.search"></i>&nbsp;</a>
				</div>
				<div class="width_10 float_l">
					<a ng-click="dimFacility(facility_data.search);show_index = ''">&nbsp;<i class="icon ion-search"></i></a>
				</div>
				<div class="clear_l"></div>
			</div>
		</div>
		<!--<div class="col-20 text-center {{show_index==1? 'bor_ltr_1px' : ''}}" style="margin-top: 7px;padding-top: 3px;">-->
		<div class="col-20 text-center" style="margin-top: 7px;padding-top: 3px;">
			<span ng-click="show_index = show_index==4 ? '' : 4">
						&nbsp;筛选 <i class="icon ion-arrow-down-b"></i>&nbsp;
					</span>
		</div>
	</div>
	<div class="row text-center" ng-hide="show_index==4">
		<div ng-click="show_index = show_index==1 ? '' : 1" class="col {{show_index==1? 'bor_ltr_1px' : 'color_95C2C1'}}">
			{{'所属街道'}}<i class="icon {{show_index==1? 'ion-arrow-up-b' : 'ion-arrow-down-b'}}"></i>
		</div>
		<div ng-click="show_index = show_index==2 ? '' : 2" class="col {{show_index==2? 'bor_ltr_1px' : 'color_95C2C1'}}">
			所属社区<i class="icon {{show_index==2? 'ion-arrow-up-b' : 'ion-arrow-down-b'}}"></i>
		</div>
		<div ng-click="show_index = show_index==3 ? '' : 3" class="col {{show_index==3? 'bor_ltr_1px' : 'color_95C2C1'}}">
			所属场地<i class="icon {{show_index==3? 'ion-arrow-up-b' : 'ion-arrow-down-b'}}"></i>
		</div>
	</div>
	<!--街道选项-->
	<div class="width_100" style="z-index: 9;" ng-show="show_index==1">
		<ion-radio value="" ng-model="facility_data.street" ng-change="faStreetChange()" name="street">
			不限
		</ion-radio>
		<ion-radio ng-repeat="item in streets" ng-value="item.streetId" ng-model="facility_data.street" ng-change="faStreetChange(item)" name="street">
			{{ item.streetName }}
		</ion-radio>
	</div>
	<!--社区选项-->
	<div class="width_100" style="z-index: 9;" ng-show="show_index==2">
		<ion-radio value="" ng-model="facility_data.community" ng-change="faCommunityChange()" name="community">
			不限
		</ion-radio>
		<ion-radio ng-repeat="item in faCommunitys" ng-value="item.communityId" ng-model="facility_data.community" ng-change="faCommunityChange(item)" name="community">
			{{ item.communityName }}
		</ion-radio>
		<!--<div ng-show="communitys && communitys.length==0">请先选择街道</div>-->
	</div>
	<!--场地选项-->
	<div class="width_100" style="z-index: 9;" ng-show="show_index==3">
		<ion-radio value="" ng-model="facility_data.site" ng-change="" name="site">
			不限
		</ion-radio>
		<ion-radio ng-repeat="item in faSites" ng-value="item.siteId" ng-model="facility_data.site" ng-change="f" name="site">
			{{ item.siteName }}
		</ion-radio>
		<!--<div ng-show="communitys && communitys.length==0">请先选择街道</div>-->
	</div>
	<!--搜索对象-->
	<div class="width_100 bg-white" style="z-index: 9;" ng-show="show_index==4">
		<div class="item item-input">
			名称：<input ng-model="facility_data.name" type="text" placeholder="输入设施名称" />
		</div>
		<div class="item item-input">
			编号：<input ng-model="facility_data.number" type="text" placeholder="输入设施编号" />
		</div>
		<!--				<div class="item item-input">
					品牌：<input ng-model="facility_data.brand" type="text" placeholder="输入设施品牌"/>
				</div>-->
		<div class="item item-input">
			负责人：<input ng-model="facility_data.principal" type="text" placeholder="输入设施负责人" />
		</div>
		<div class="item item-select">
			使用状态：
			<select ng-model="facility_data.facilityState">
				<option value="">全部</option>
				<option>启用</option>
				<option>禁用</option>
			</select>
		</div>
		<div class="item">
			<p></p>
			<div class="button-bar bar-balanced">
				<a ng-click="facility_data.name='';facility_data.number='';facility_data.principal='';facility_data.facilityState='';" class="button">重置</a>
				<a ng-click="preciseFacility();show_index = ''" class="button">查询</a>
				<a ng-click="show_index = ''" class="button">取消</a>
			</div>
			<p></p>
		</div>
	</div>
	<!--列表-->
	<div style="z-index: -1;" ng-hide="show_index">
		<ion-list class="project-list">
			<!--<a class="item item-icon-right" ng-repeat="site in sites" href="#/infrastructure/site/{{site.siteId}}">-->
			<a class="item item-icon-right" ng-repeat="f in facilityList" ng-click="facilityClick(f)">
				<div class="list-box">
					<i class="icon ion-chevron-right icon-accessory"></i> {{f.facilityName || f.equipMentDto.equipMentName}}<br />
					<div class="row size_ss text_color_f5">
						<div class="col">{{f.facilityNumber || f.equipMentDto.equipMentNumber}}</div>
						<div class="col">{{f.equipMentDto.equipMentBrand}}</div>
					</div>
				</div>
			</a>
		</ion-list>
		<div class="padding"></div>
		<div ng-hide="facility_data.loadMore" style="text-align: center">
			<span>到底了，没有更多数据了！</span>
		</div>
		<ion-infinite-scroll ng-if="facility_data.loadMore" on-infinite="loadFacility(show_index)"></ion-infinite-scroll>
	</div>
</ion-content>
</ion-view>