(function(){if(typeof angular==="undefined"){return}angular.module("bsTable",[]).constant("uiBsTables",{bsTables:{}}).directive("bsTableControl",["uiBsTables","$compile","$timeout",function(t,e,o){var n=".bootstrap-table";var a=".fixed-table-body";var r=".search input";var l=t.bsTables;function s(t){var e;$.each(l,function(o,a){if(!a.$el.closest(n).has(t).length)return;e=a;return true});return e}$(window).resize(function(){$.each(l,function(t,e){e.$el.bootstrapTable("resetView")})});function i(){var t=this;var e=t.$s.bsTableControl.state;t.$s.$apply(function(){e.scroll=t.$el.bootstrapTable("getScrollPosition")})}$(document).on("post-header.bs.table",n+" table",function(t){var e=s(t.target);if(!e)return;e.$el.closest(n).find(a).on("scroll",i.bind(e))}).on("sort.bs.table",n+" table",function(t,e,o){var n=s(t.target);if(!n)return;var a=n.$s.bsTableControl.state;n.$s.$apply(function(){a.sortName=e;a.sortOrder=o})}).on("page-change.bs.table",n+" table",function(t,e,o){var n=s(t.target);if(!n)return;var a=n.$s.bsTableControl.state;n.$s.$apply(function(){a.pageNumber=e;a.pageSize=o})}).on("search.bs.table",n+" table",function(t,e){var o=s(t.target);if(!o)return;var n=o.$s.bsTableControl.state;o.$s.$apply(function(){n.searchText=e})}).on("focus blur",n+" "+r,function(t){var e=s(t.target);if(!e)return;var o=e.$s.bsTableControl.state;e.$s.$apply(function(){o.searchHasFocus=$(t.target).is(":focus")})});var b=$.fn.bootstrapTable.Constructor,c=b.prototype.initColumn;b.prototype.appendControls=function(t,n,a,r){if(a){var l=this,s=l.$header;meEl=l.$el;o(function(){var o=meEl.scope().$new();o.column=n;o.$apply(function(){t.append(e(a)(o))});if($.isFunction(r)){r(s,n)}})}};b.prototype.initRowAfter=function(t,o,n,a){if(o&&o!==true){var r=this.$el.scope();if(r){r=r.$new();r.row=n;r.rowIndex=a;r.$apply(function(){t.append(e(o)(r))})}}};b.prototype.initColumn=function(t){if(t.bsFormatter&&!t.formatter){t.formatter=t.bsFormatter.replace(/\{/g,"{{").replace(/\}/g,"}}")}return $.extend({},c.apply(this,Array.prototype.slice.apply(arguments)),t)};return{restrict:"EA",scope:{bsTableControl:"="},link:function(t,e){l[t.$id]={$s:t,$el:e};t.instantiated=false;t.$watch("bsTableControl.options",function(o){if(!o)o=t.bsTableControl.options={};var a=t.bsTableControl.state||{};if(t.instantiated)e.bootstrapTable("destroy");e.bootstrapTable(angular.extend(angular.copy(o),a));t.instantiated=true;t.bsTableControl.getSelections=function(){return e.bootstrapTable("getSelections")};t.bsTableControl.getAllSelections=function(){return e.bootstrapTable("getAllSelections")};t.bsTableControl.load=function(t){e.bootstrapTable("load",t)};t.bsTableControl.reload=function(t){e.bootstrapTable("refresh",t)};t.bsTableControl.refresh=function(t){e.bootstrapTable("refresh",t)};t.bsTableControl.expandRow=function(t){e.bootstrapTable("expandRow",t)};t.bsTableControl.collapseRow=function(t){e.bootstrapTable("collapseRow",t)};if("scroll"in a)e.bootstrapTable("scrollTo",a.scroll);if("searchHasFocus"in a)e.closest(n).find(r).focus()},true);t.$watch("bsTableControl.state",function(o){if(!o)o=t.bsTableControl.state={};e.trigger("directive-updated.bs.table",[o])},true);t.$on("$destroy",function(){l[t.$id]=null;delete l[t.$id]})}}}])})();