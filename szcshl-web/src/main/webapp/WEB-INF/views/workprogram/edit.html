<#assign path=request.contextPath/>
<meta charset="UTF-8">
<div ng-include src="'${path}/contents/app/common/dialog-alert.tmpl.html'"></div>
<div ng-include src="'${path}/contents/app/common/dialog-confirm.tmpl.html'"></div>
<div ng-include src="'${path}/contents/app/common/dialog-upload.html'"></div>
<style>
    .k-animation-container ul {
        max-height: 200px;
    }
</style>
<div class="toolbar">
    <button class="btn btn-sm btn-success" ng-click="vm.create()" ng-disabled="vm.iscommit"><span
            class="glyphicon glyphicon-ok"></span>保存
    </button>
    <go-back-signflow></go-back-signflow>   <!--流程回退按钮-->
    <flow-file-button></flow-file-button>   <!--附件上传按钮-->
</div>

<div class="well well-sm" style="background:white; min-height: 700px;">
    <ul id="wpTab" class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" for-div="wp_edit">编辑页面</a></li>
        <li ng-show="vm.model.workProgramDtoList && vm.model.workProgramDtoList.length > 0"><a data-toggle="tab" for-div="wp_list">项目其它工作方案</a></li>
    </ul>


    <!--S 编辑页面 -->
    <div class="tab-content" style="background:white;">
      
        <!--S 编辑页面 -->
        <div class="well well-sm tab-pane fade in active" style="background:white;" id="wp_edit">

            <!-- S 项目建议书/可行性研究报告 -->
            <div ng-show="vm.work.workreviveStage=='项目建议书'|| vm.work.workreviveStage=='可行性研究报告' || vm.work.workreviveStage=='项目概算' || vm.work.workreviveStage=='其它'">
                <div ng-show="vm.work.branchId == '1'" ng-include src="'${path}/contents/app/workprogram/workprogramEdit/mainEdit.html'"></div>
                <div ng-show="vm.work.branchId != '1'" ng-include src="'${path}/contents/app/workprogram/workprogramEdit/assistEdit.html'"></div>
            </div>
            <!-- E 项目建议书/可行性研究报告 -->
            
        
            <!--S 资金申请报告 -->
             <div ng-show="vm.work.workreviveStage=='资金申请报告'">
                <div ng-show="vm.work.branchId == '1'" ng-include src="'${path}/contents/app/workprogram/workprogramEdit/mainCapitalAppReportEdit.html'"></div>
                <div ng-show="vm.work.branchId != '1'" ng-include src="'${path}/contents/app/workprogram/workprogramEdit/assistCapitalAppReportEdit.html'"></div>
            </div> 
            <!--E 资金申请报告 -->
             
            <!-- S 进口设备 -->
             <div ng-show="vm.work.workreviveStage=='进口设备'">
                <div ng-show="vm.work.branchId == '1'" ng-include src="'${path}/contents/app/workprogram/workprogramEdit/mainForeignEdit.html'"></div>
                <div ng-show="vm.work.branchId != '1'" ng-include src="'${path}/contents/app/workprogram/workprogramEdit/assistForeignEdit.html'"></div>
            </div>
            <!-- E 进口设备 -->

            <!-- S 设备清单（国产）  /设备清单（进口）-->
            <div ng-show="vm.work.workreviveStage=='设备清单（国产）' ||vm.work.workreviveStage=='设备清单（进口）'">
                 <div ng-show="vm.work.branchId == '1'" ng-include src="'${path}/contents/app/workprogram/workprogramEdit/mainEquipmentImportEdit.html'"></div>
                 <div ng-show="vm.work.branchId != '1'" ng-include src="'${path}/contents/app/workprogram/workprogramEdit/assistEquipmentImportEdit.html'"></div>
             </div>
            <!-- S 设备清单（国产）/设备清单（进口） -->
            
         </div>
        <!--E 编辑页面 -->  
      
        <!--S 工作方案查看页面 -->
        <div class="well well-sm tab-pane fade" style="background:white;" id="wp_list">
            <div  ng-show="vm.work.workreviveStage=='项目建议书'|| vm.work.workreviveStage=='可行性研究报告' || vm.work.workreviveStage=='项目概算' || vm.work.workreviveStage=='其它'" ng-include src="'${path}/contents/app/workprogram/workprogramDetail/all_details.html'"></div>
            <div  ng-show="vm.work.workreviveStage=='资金申请报告'" ng-include src="'${path}/contents/app/workprogram/workprogramDetail/capitalAppReportDetail.html'"></div>
            <div  ng-show="vm.work.workreviveStage=='进口设备'" ng-include src="'${path}/contents/app/workprogram/workprogramDetail/foregnDetail.html'"></div>
            <div  ng-show="vm.work.workreviveStage=='设备清单（国产）' || vm.work.workreviveStage=='设备清单（进口）'" ng-include src="'${path}/contents/app/workprogram/workprogramDetail/mainDomesticDetail.html'"></div>
        </div>
        <!--E 工作方案查看页面 -->
        
    </div>
    
    <!--S 项目关联弹窗 -->
    <div class="mergeSignWP" id="mergeSignWP" style="background:white;display:none;">
        <form id="searchformi" name="searchformi">
            <div class="toolbar">
                <button class="btn btn-sm btn-success" ng-click="vm.mergeAddWork()"><span
                        class="glyphicon glyphicon-ok"></span>保存
                </button>
                <button class="btn btn-sm btn-primary" ng-click="vm.onWorkClose()"><span
                        class="glyphicon glyphicon-chevron-left"></span>关闭
                </button>
            </div>
            <ol class="breadcrumb">
                <table style="width:100%">
                    <tr>
                        <td class="formAlignRight" style="width:100px;">项目名称</td>
                        <td>
                            <input type="text" ng-model="vm.serchSign.projectname" >
                        </td>
                        <td class="formAlignRight" style="width:100px;">评审阶段</td>
                        <td>
                            <input type="text" ng-model="vm.serchSign.reviewstage">
                        </td>
                    </tr>
                </table>
            </ol>
        </form>

        <table style="width:100%;">
            <tr>
                <td rowspan="4" valign="top" class="breadcrumb" nowrap="nowrap">
                    <p class="label label-success">待选项目列表</p>
                    <div style="width:500px; height:400px;overflow: auto;">
                        <table class="table table-bordered" style="width: 500px;">
                            <tr>
                                <td width="10%" align="center" bgcolor="#eeeeee">请选择</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">项目名称</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">评审阶段</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">建设单位</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">评审部门</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">项目签收时间</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">联系人</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">联系电话</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">项目负责人</td>
                            </tr>
                            <tr ng-repeat="x in vm.unMergeSign | filter:vm.filterSign ">
                                <td align="center"><input type="checkbox" name="mergeSign" value="{{x.signid }}"/></td>
                                <td style="text-align: center;">{{ x.projectname }}</td>
                                <td style="text-align: center;">{{ x.reviewstage }}</td>
                                <td style="text-align: center;">{{ x.reviewdeptid }}</td>
                                <td style="text-align: center;">{{ x.builtcompanyid }}</td>
                                <td style="text-align: center;">{{ x.signdate }}</td>
                                <td style="text-align: center;">{{ x.mainDeptUserName }}</td>
                                <td style="text-align: center;">{{ x.mainDeptContactPhone}}</td>
                                <td style="text-align: center;">{{ x.mFlowMainUserName }}</td>
                            </tr>
                        </table>
                    </div>
                </td>
                <td class="text-center" style="height:200px;width:100px;">
                    <p><button class="btn btn-xs btn-default" ng-click="vm.chooseSign()" type="button" ><i class="glyphicon glyphicon-chevron-right" aria-hidden="true"></i> 挑选项目</button></p>
                    <p><button class="btn btn-xs btn-default" ng-click="vm.cancelSign()" type="button" ><i class="glyphicon glyphicon-chevron-left" aria-hidden="true"></i> 取消挑选</button></p>
                </td>

                <td rowspan="4" valign="top" class="breadcrumb" nowrap="nowrap">
                    <p class="label label-success">已选项目列表</p>
                    <div style="width:500px; height:400px;overflow: auto;">
                        <table class="table table-bordered" id="workTab" style="width: 500px;overflow: auto;">
                            <tr>
                                <td width="10%" align="center" bgcolor="#eeeeee">请选择</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">项目名称</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">评审阶段</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">建设单位</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">评审部门</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">项目签收时间</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">联系人</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">联系电话</td>
                                <td width="10%" align="center" bgcolor="#eeeeee">项目负责人</td>
                            </tr>
                            <tr ng-repeat="x in vm.mergeSign">
                                <td align="center"><input type="checkbox" name="cancelMergeSignid" value="{{x.signid}}"/></td>
                                <td style="text-align: center;">{{ x.projectname }}</td>
                                <td style="text-align: center;">{{ x.reviewstage }}</td>
                                <td style="text-align: center;">{{ x.reviewdeptid }}</td>
                                <td style="text-align: center;">{{ x.builtcompanyid }}</td>
                                <td style="text-align: center;">{{ x.signdate }}</td>
                                <td style="text-align: center;">{{ x.mainDeptUserName }}</td>
                                <td style="text-align: center;">{{ x.mainDeptContactPhone}}</td>
                                <td style="text-align: center;">{{ x.mFlowMainUserName }}</td>
                            </tr>
                        </table>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <!--E 项目关联弹窗 -->

    <!-- S 会议预定弹窗 -->
    <div id="stageWindow" style="background:white;display:none;">
        <form id="stageForm" name="stageForm">
            <div class="toolbar">
                <button class="btn btn-sm btn-success" ng-click="vm.saveRoom()"><span
                        class="glyphicon glyphicon-ok"></span>保存
                </button>
                <button class="btn btn-sm btn-primary" ng-click="vm.onRoomClose()"><span
                        class="glyphicon glyphicon-chevron-left"></span>关闭
                </button>
            </div>
            <table style="width:100%">
                <tr>
                    <td class="formAlignRight">会议名称： <span class="required">*</span></td>
                    <td>
                        <input type="hidden" class="form-control input-sm " ng-model="vm.roombook.workProgramId"
                               name="workProgramId" id="workProgramId">
                        <input type="hidden" class="form-control input-sm " ng-model="vm.roombook.stageOrg"
                               name="stageOrg" id="stageOrg">
                        <input type="hidden" class="form-control input-sm " ng-model="vm.roombook.id">

                        <input maxlength="200" class="form-control input-sm " ng-model="vm.roombook.rbName " id="rbName"
                               name="rbName" data-val="true" data-val-required="必填">
                    </td>
                    <td><span data-valmsg-for="rbName" data-valmsg-replace="true" class="errors"></span></td>
                </tr>
                <tr>
                    <td class="formAlignRight">会议地点： <span class="required">*</span></td>
                    <td>
                        <select ng-model="vm.roombook.mrID" name="mrID" id="mrID" data-val="true" data-val-required="必填">
                            <option ng-repeat="x in vm.roombookingList" value="{{x.id}}" ng-checked="vm.roombook.mrID == x.id">{{x.addr}}</option>
                        </select>
                    </td>
                    <td><span data-valmsg-for="mrID" data-valmsg-replace="true" class="errors"></span></td>
                </tr>
                <tr>
                    <td class="formAlignRight">会议类型： <span class="required">*</span></td>
                    <td>
                        <select ng-model="vm.roombook.rbType" name="rbType" id="rbType">
                            <option ng-repeat="x in DICT.MEETING_ROOM.dicts" value="{{x.dictName}}">{{x.dictName}}</option>
                        </select>
                    </td>
                    <td><span data-valmsg-for="rbType" data-valmsg-replace="true" class="errors"></span></td>
                </tr>
                <tr>
                    <td class="formAlignRight">会议主持人： <span class="required">*</span></td>
                    <td>
                        <input type="text" maxlength="200" class="form-control input-sm " ng-model="vm.roombook.host "
                               id="host" name="host" data-val="true" data-val-required="必填">
                    </td>
                    <td><span data-valmsg-for="host" data-valmsg-replace="true" class="errors"></span></td>
                </tr>
                <tr>
                    <td class="formAlignRight">会议预定人： <span class="required">*</span></td>
                    <td>
                        <input type="text" maxlength="200" class="form-control input-sm "
                               ng-model="vm.roombook.dueToPeople " id="dueToPeople" name="dueToPeople" data-val="true"
                               data-val-required="必填">
                    </td>
                    <td><span data-valmsg-for="dueToPeople" data-valmsg-replace="true" class="errors"></span></td>

                </tr>

                <tr>
                    <td class="formAlignRight">会议日期： <span class="required">*</span></td>
                    <td>
                        <input type="text" kendo-date-picker k-format="'yyyy-MM-dd'" style="width:40%;"
                               ng-model="vm.roombook.rbDay" id="rbDay" name="rbDay" data-val="true"
                               data-val-required="必填">
                    </td>
                    <td><span data-valmsg-for="rbDay" data-valmsg-replace="true" class="errors"></span></td>
                </tr>
                <tr>
                    <td class="formAlignRight">开始时间： <span class="required">*</span></td>
                    <td>
                        <input kendo-time-picker k-format="'HH:mm'" min="vm.startDateTime" max="vm.endDateTime"
                               style="width:40%;" ng-model="vm.roombook.beginTimeStr" id="beginTime" name="beginTime">
                    </td>
                    <td><span data-valmsg-for="beginTime" data-valmsg-replace="true" class="errors"></span></td>

                </tr>
                <tr>
                    <td class="formAlignRight">结束时间： <span class="required">*</span></td>
                    <td>
                        <input kendo-time-picker k-format="'HH:mm'" min="vm.startDateTime" max="vm.endDateTime"
                               style="width:40%;" ng-model="vm.roombook.endTimeStr" id="endTime" name="endTime">
                    <td>
                        <span data-valmsg-for="endTime" data-valmsg-replace="true" class="errors"></span></td>
                </tr>
                <tr>
                    <td class="formAlignRight">主要内容： <span class="required">*</span></td>
                    <td>
                        <input type="text" maxlength="200" class="form-control input-sm "
                               ng-model="vm.roombook.content " id="content" name="content" data-val="true"
                               data-val-required="必填">
                    </td>
                    <td><span data-valmsg-for="content" data-valmsg-replace="true" class="errors"></span></td>
                </tr>
                <tr>
                    <td class="formAlignRight">备注：</td>
                    <td>
                        <textarea type="text" maxlength="200" class="form-control input-sm "
                                  ng-model="vm.roombook.remark " id="remark" name="remark"></textarea>
                    </td>
                    <td></td>
                </tr>

            </table>
        </form>
    </div>
    <!--  E 会议预定弹窗 -->

</div>




