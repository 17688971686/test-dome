<#assign path=request.contextPath/>
<meta charset="UTF-8">
<div ng-include src="'${path}/contents/app/common/dialog-alert.tmpl.html'"></div>
<div ng-include src="'${path}/contents/app/common/dialog-confirm.tmpl.html'"></div>
<div ng-include src="'${path}/contents/app/bookBuy/bookBuyEdit.html'"></div>


<div class="well well-sm" style="background:white;">
    <ol class="breadcrumb">
        <li><a href="#/bookBuy">图书管理</a></li>
        <li class="active">{{vm.title}}</li>
    </ol>
    <div class="toolbar">
        <button class="btn btn-sm btn-primary" ng-click="vm.searchForm()" ng-disabled="vm.isSubmit"><span
                class="glyphicon glyphicon-search"></span>查询
        </button>
        <button class="btn btn-sm btn-primary" ng-click="vm.formReset()">
            <span class="glyphicon glyphicon-repeat"></span>重置</button>
    </div>
    <div class="well well-sm">
        <form id="bookForm" name="bookForm" >
            <table style="width:100%">
                <tr>
                    <td class="text-right">图书编号</td>
                    <td style="width: 18%">
                       <input name="booksCode" type="text" operator="like" ng-model="vm.searchModel.booksCode" class="form-control input-sm "/>
                    </td>
                    <td class="text-right">图书名称</td>
                    <td style="width: 18%">
                        <input name="booksName" type="text" operator="like" ng-model="vm.searchModel.booksName" class="form-control input-sm "/>
                    </td>
                </tr>
            </table>
        </form>
    </div>
    <div>
        <table border="1px" style="width: 100%;">
            <tr >
                <td style="width:20%"  class="text-center">序号</td>
                <td style="width:15%"  class="text-center">图书编号</td>
                <td style="width:20%"  class="text-center">图书名称</td>
                <td style="width:15%"  class="text-center">借书人</td>
                <td style="width:10%"  class="text-center">借书数量</td>
                <td style="width:10%"  class="text-center">借书日期</td>
                <td style="width:10%"  class="text-center">应还日期</td>
            </tr>
            <tbody ng-repeat="c in vm.bookBorrowSumDtoList">
            <tr  ng-repeat="x in vm.bookBorrowDetailList" ng-if="x.bookBorrower==c.bookBorrower ">
                <td align="center">{{$index+1}}</td>
                <td class="text-center">{{x.booksCode}}</td>
                <td class="text-center">{{x.booksName}}</td>
                <td class="text-center">{{x.bookBorrower}}</td>
                <td class="text-center">{{x.borrowNum}}</td>
                <td class="text-center">{{x.borrowDate}}</td>
                <td class="text-center">{{x.returnDate}}</td>
            </tr>
            <tr>
                <td class="text-center"><strong>合计</strong></td>
                <td class="text-center"><strong>{{c.totalCount}}</strong></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<script type="text/template" id="columnBtns">
    <a class="btn btn-xs btn-primary" href="#/bookBuyView/{0}"><span class="glyphicon"></span>查看详情</a>
</script>

