<#assign path=request.contextPath/>
<meta charset="UTF-8">
<link href="${path}/contents/libs/zTree/css/zTreeStyle/zTreeStyle.css" rel="stylesheet" />
<script src="${path}/contents/libs/zTree/js/jquery.ztree.all.min.js"></script>

<div ng-include src="'${path}/contents/app/common/dialog-alert.tmpl.html'"></div>

<style>
    .ztree li span.button.chk {
        width: 14px;
    }
</style>
<div class="well well-sm" style="background:white;">
    <ol class="breadcrumb">
        <li><a href="#/user">用户管理</a></li>
        <li class="active" >{{vm.title}}</li>
    </ol>
    <form id="form" name="form">
        <div class="toolbar">
            <a class="btn btn-sm btn-primary" href="#/user"><span class="glyphicon glyphicon-chevron-left"></span>返回</a>
            <button class="btn btn-sm btn-success" ng-click="vm.create()" ng-disabled="vm.isSubmit" ng-hide="vm.isUpdate"><span class="glyphicon glyphicon-ok"></span>创建</button>
            <button class="btn btn-sm btn-success" ng-click="vm.update()" ng-disabled="vm.isSubmit" ng-show="vm.isUpdate"><span class="glyphicon glyphicon-ok"></span>更新</button>
         </div>
       <!--<table style="width:100%">
            <tr>
                <td class="formAlignRight" style="width:150px;"></td>
                <td style="width:400px;"><span class="errors">{{vm.message}}</span></td>
                <td></td>
            </tr>

            <tr>
                <td class="formAlignRight">登录名： <span class="required">*</span></td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm " ng-disabled="vm.isUpdate"  ng-model="vm.model.loginName " id="loginName" name="loginName" data-val="true" data-val-required="必填">
                </td>
                <td>
                </td>
            </tr>
             <tr>
                <td class="formAlignRight">显示名： </td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm "  ng-model="vm.model.displayName" id="displayName" name="displayName" data-val="false" data-val-required="必填">
                </td>
                <td><span data-valmsg-for="displayName" data-valmsg-replace="true" class="errors"></span>
            </tr>
            
            <tr ng-hide="vm.isUpdate">
                <td class="formAlignRight">密码： <span class="required">*</span></td>
                <td>
                    <input type="password" maxlength="200" class="form-control input-sm " ng-model="vm.model.password " id="password" name="password" data-val="true" data-val-required="必填">
                </td>
                <td><span data-valmsg-for="password" data-valmsg-replace="true" class="errors"></span></td>
            </tr>
            <tr ng-hide="vm.isUpdate">
                <td class="formAlignRight">确认密码： <span class="required">*</span></td>
                <td>
                    <input type="password" maxlength="200" class="form-control input-sm " ng-model="vm.model.passwordConfirm " id="passwordConfirm" name="passwordConfirm" data-val="true" data-val-required="必填" data-val-equalto="两次密码不一致" data-val-equalto-other="password">
                </td>
                <td><span data-valmsg-for="passwordConfirm" data-valmsg-replace="true" class="errors"></span></td>
            </tr>
            
            <tr>
                <td class="formAlignRight">联系电话：<span class="required">*</span> </td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm "  ng-model="vm.model.userPhone" id="userPhone" name="userPhone" data-val="false" data-val-required="必填">
                </td>
                <td>
                
                <span data-valmsg-for="userPhone" data-valmsg-replace="true" class="errors"></span>
                 <span class="errors" ng-show="vm.isUserExist"></span></td>
                </td>
            </tr>
            
            <tr>
                <td class="formAlignRight">联系手机：<span class="required">*</span> </td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm "  ng-model="vm.model.userMPhone" id="userMPhone" name="userMPhone" data-val="false" data-val-required="必填">
                </td>
                <td><span data-valmsg-for="userMPhone" data-valmsg-replace="true" class="errors"></span></td>
            </tr>
            
            <tr>
                <td class="formAlignRight">电子邮件： <span class="required">*</span></td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm "  ng-model="vm.model.email" id="email" name="email" data-val="false" data-val-required="必填">
                </td>
                <td>
                <span data-valmsg-for="email" data-valmsg-replace="true" class="errors"></span></td>
				
            </tr>
            <tr>
                <td class="formAlignRight">序号：<span class="required">*</span> </td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm "  ng-model="vm.model.userOrder" id="userOrder" name="userOrder" data-val="false" data-val-required="必填">
                </td>
                <td><span data-valmsg-for="userOrder" data-valmsg-replace="true" class="errors"></span></td>
            </tr>
             <tr>
                <td class="formAlignRight">性别：<span class="required">*</span> </td>
                <td>
                     <select ng-model="vm.model.userSex" name="userSex" id="userSex" class="form-control input-sm ">
						<option ng-repeat="x in DICT.SEX.dicts" value="{{x.dictName}}" ng-selected="x.dictName == vm.model.userSex">{{x.dictName}}</option>
					</select>
                </td>
                <td><span data-valmsg-for="userSex" data-valmsg-replace="true" class="errors"></span>
                </td>
            </tr>
            <tr>
                <td class="formAlignRight">停用情况：<span class="required">*</span> </td>
                <td>
                     <select ng-model="vm.model.useState" id="useState" name="useState"class="form-control input-sm " data-val="true" data-val-required="必填">
						<option ng-repeat="x in DICT.USERSTATE.dicts" value="{{x.dictName}}" ng-selected="x.dictName == vm.model.useState">{{x.dictName}}</option>
					</select>
                </td>
                <td><span data-valmsg-for="useState" data-valmsg-replace="true" class="errors"></span>
                </td>
            </tr>
            
             <tr>
                <td class="formAlignRight">密码情况：<span class="required">*</span> </td>
                <td>
                     <select ng-model="vm.model.pwdState" id="pwdState" name="useState"class="form-control input-sm " data-val="true" data-val-required="必填">
						<option ng-repeat="x in DICT.PWDSTATE.dicts" value="{{x.dictName}}" ng-selected="x.dictName == vm.model.pwdState">{{x.dictName}}</option>
					</select>
                </td>
                <td><span data-valmsg-for="pwdState" data-valmsg-replace="true" class="errors"></span>
                </td>
            </tr>
             <tr>
                <td class="formAlignRight">在职情况：<span class="required">*</span> </td>
                <td>
                     <select ng-model="vm.model.jobState" id="jobState" name="jobState"class="form-control input-sm " data-val="true" data-val-required="必填">
						<option ng-repeat="x in DICT.JOBSTATE.dicts" value="{{x.dictKey}}" ng-selected="x.dictKey == vm.model.jobState">{{x.dictName}}</option>
					</select>
                </td>
                <td><span data-valmsg-for="jobState" data-valmsg-replace="true" class="errors"></span>
                </td>
            </tr>
            
             <tr>
                <td class="formAlignRight">所在部门：<span class="required">*</span> </td>
                <td>
                     <select ng-model="vm.model.orgId" id="orgId" name="orgId"class="form-control input-sm " data-val="true" data-val-required="必填">
						<option ng-repeat="x in vm.org" ng-selected="vm.model.orgDto.id == x.id"  value="{{x.id}}" >{{x.name}}</option>
					</select>
                </td>
                <td><span data-valmsg-for="name" data-valmsg-replace="true" class="errors"></span>
                </td>
            </tr>
            
            
            <tr>
                <td class="formAlignRight">备注： </td>
                <td>
                <textarea class="form-control" maxlength="200" name="remark" id="remark" ng-model="vm.model.remark" style="height:120px;"></textarea>
                </td>
                <td><span data-valmsg-for="remark" data-valmsg-replace="true" class="errors"></span></td>
            </tr>
            <tr>
                <td class="formAlignRight" style=" vertical-align:top">所属角色： </td>
                <td >
                    <div >
                
                        <ul id="zTree" class="ztree"></ul>
                    </div>
                   
                </td>
                <td></td>
            </tr>
        </table>-->
        <table class="table table-bordered  dataTable">
            <tr>
                <td class="formAlignRight"><strong>用户信息</strong></td>
                <td colspan="5" style="width:400px;"><span class="errors">{{vm.message}}</span></td>
            </tr>
            <tr>
                <td class="formAlignRight">用户头像：</td>
                <td colspan="5"><img style="margin: 10px 0px;" src="" width="80" height="80" alt="我的头像"/><p><input type="file" ></p></td>
            </tr>
            <tr>
                <td class="formAlignRight">登录名：<span class="required">*</span></td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm " ng-disabled="vm.isUpdate"  ng-model="vm.model.loginName " id="loginName" name="loginName" data-val="true" data-val-required="必填">
                    <span data-valmsg-for="loginName" data-valmsg-replace="true" class="errors"></span>
                    <span class="errors" ng-show="vm.isUserExist">角色已存在</span>
                </td>
                <td class="formAlignRight">显示名：</td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm "  ng-model="vm.model.displayName" id="displayName" name="displayName" data-val="false" data-val-required="必填">
                    <span data-valmsg-for="displayName" data-valmsg-replace="true" class="errors"></span>
                </td>
                <td colspan="2"></td>

            </tr>
            <tr ng-hide="vm.isUpdate">
                <td class="formAlignRight">密码： <span class="required">*</span></td>
                <td>
                    <input type="password" maxlength="200" class="form-control input-sm " ng-model="vm.model.password " id="password" name="password" data-val="true" data-val-required="必填">
                    <span data-valmsg-for="password" data-valmsg-replace="true" class="errors"></span>
                </td>
                <td class="formAlignRight">确认密码： <span class="required">*</span></td>
                <td>
                    <input type="password" maxlength="200" class="form-control input-sm " ng-model="vm.model.passwordConfirm " id="passwordConfirm" name="passwordConfirm" data-val="true" data-val-required="必填" data-val-equalto="两次密码不一致" data-val-equalto-other="password">
                    <span data-valmsg-for="passwordConfirm" data-valmsg-replace="true" class="errors"></span>
                </td>
                <td colspan="2"></td>
            </tr>
            <tr>
                <td class="formAlignRight">电子邮件：<span class="required">*</span></td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm "  ng-model="vm.model.email" id="email" name="email" data-val="false" data-val-required="必填">
                    <span data-valmsg-for="email" data-valmsg-replace="true" class="errors"></span>
                </td>
                <td class="formAlignRight">序号：<span class="required">*</span></td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm "  ng-model="vm.model.userOrder" id="userOrder" name="userOrder" data-val="false" data-val-required="必填">
                    <span data-valmsg-for="userOrder" data-valmsg-replace="true" class="errors"></span>
                </td>
                <td class="formAlignRight">联系手机：<span class="required">*</span></td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm "  ng-model="vm.model.userMPhone" id="userMPhone" name="userMPhone" data-val="false" data-val-required="必填">
                    <span data-valmsg-for="userMPhone" data-valmsg-replace="true" class="errors"></span>
                </td>
            </tr>
            <tr>
                <td class="formAlignRight">性别：<span class="required">*</span></td>
                <td>
                    <select ng-model="vm.model.userSex" name="userSex" id="userSex" class="form-control input-sm ">
                        <option ng-repeat="x in DICT.SEX.dicts" value="{{x.dictName}}" ng-selected="x.dictName == vm.model.userSex">{{x.dictName}}</option>
                    </select>
                    <span data-valmsg-for="userSex" data-valmsg-replace="true" class="errors"></span>
                </td>
                <td class="formAlignRight">停用情况：<span class="required">*</span></td>
                <td>
                    <select ng-model="vm.model.useState" id="useState" name="useState"class="form-control input-sm " data-val="true" data-val-required="必填">
                        <option ng-repeat="x in DICT.USERSTATE.dicts" value="{{x.dictName}}" ng-selected="x.dictName == vm.model.useState">{{x.dictName}}</option>
                    </select>
                    <span data-valmsg-for="useState" data-valmsg-replace="true" class="errors">
                </td>
                <td class="formAlignRight">联系电话：<span class="required">*</span></td>
                <td>
                    <input  type="text" maxlength="200" class="form-control input-sm "  ng-model="vm.model.userPhone" id="userPhone" name="userPhone" data-val="false" data-val-required="必填">
                    <span data-valmsg-for="userPhone" data-valmsg-replace="true" class="errors"></span>
                    <span class="errors" ng-show="vm.isUserExist"></span>
                </td>

            </tr>
            <tr>
                <td class="formAlignRight">在职情况：<span class="required">*</span></td>
                <td>
                    <select ng-model="vm.model.jobState" id="jobState" name="jobState"class="form-control input-sm " data-val="true" data-val-required="必填">
                        <option ng-repeat="x in DICT.JOBSTATE.dicts" value="{{x.dictName}}" ng-selected="x.dictName == vm.model.jobState">{{x.dictName}}</option>
                    </select>
                    <span data-valmsg-for="jobState" data-valmsg-replace="true" class="errors"></span>
                </td>
                <td class="formAlignRight">所在部门：<span class="required">*</span> </td>
                <td>
                    <select ng-model="vm.model.orgId" id="orgId" name="orgId"class="form-control input-sm " data-val="true" data-val-required="必填">
                        <option ng-repeat="x in vm.org" ng-selected="vm.model.orgDto.id == x.id"  value="{{x.id}}" >{{x.name}}</option>
                    </select>
                    <span data-valmsg-for="name" data-valmsg-replace="true" class="errors"></span>
                </td>
                <td class="formAlignRight" >密码情况：<span class="required">*</span></td>
                <td>
                    <select ng-model="vm.model.pwdState" id="pwdState" name="useState"class="form-control input-sm " data-val="true" data-val-required="必填">
                        <option ng-repeat="x in DICT.PWDSTATE.dicts" value="{{x.dictName}}" ng-selected="x.dictName == vm.model.pwdState">{{x.dictName}}</option>
                    </select>
                    <span data-valmsg-for="pwdState" data-valmsg-replace="true" class="errors"></span>
                </td>
            </tr>
            <tr>
                <td class="formAlignRight">备注： </td>
                <td colspan="5">
                    <textarea class="form-control" maxlength="200" name="remark" id="remark" ng-model="vm.model.remark" style="height:120px;"></textarea>
                    <br/>
                    <span data-valmsg-for="remark" data-valmsg-replace="true" class="errors"></span></td>
            </tr>
            <tr>
                <td class="formAlignRight" style=" vertical-align:top">所属角色： </td>
                <td colspan="5" >
                    <div >

                        <ul id="zTree" class="ztree"></ul>
                    </div>

                </td>
            </tr>
        </table>
    </form>
</div>