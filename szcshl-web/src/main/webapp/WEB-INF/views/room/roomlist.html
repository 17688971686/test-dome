<#assign path=request.contextPath/>
<meta charset="UTF-8">
<div ng-include src="'${path}/contents/app/common/dialog-alert.tmpl.html'"></div>
<div ng-include src="'${path}/contents/app/common/dialog-confirm.tmpl.html'"></div>
 <ol class="breadcrumb">
        <li><a href="#/room">会议室预定管理</a></li>
        <li class="active">{{vm.title}}</li>
    </ol>
 
        <div kendo-scheduler k-options="vm.schedulerOptions">
        
        <div style="height: 120px;">
        <br>
        会议室查询：${user}
       	 <select ng-model="vm.id"  ng-change="vm.findMeeting()" style="width: 10%">
			<option ng-repeat="x in vm.meeting" value="{{x.id}}">{{x.addr}}</option>
		</select>
       	 
		     <center>
			&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
		 	<@shiro.hasPermission name="room#exports#get">  
			<button type="button" class="k-button k-primary" ng-click="vm.exportWeek()" value="">导出本周评审会会议安排</button>
			</@shiro.hasPermission>
			
			&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
			<@shiro.hasPermission name="room#exportWeek#get">  
			<button type="button" class="k-button k-primary" ng-click="vm.exportThisWeek()" value="">导出本周全部会议安排</button>
			</@shiro.hasPermission>
			<br><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
			<@shiro.hasPermission name="room#stageNextWeek#get">  
			<button type="button" class="k-button k-primary" ng-click="vm.stageNextWeek()" value="">导出下周评审会议安排</button>
			</@shiro.hasPermission>
			&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
			<@shiro.hasPermission name="room#exportNextWeek#get">
			<button type="button" class="k-button k-primary" ng-click="vm.exportNextWeek()" value="">导出下周全部会议安排</button>
			</@shiro.hasPermission>
			</center>	
        </div>
        
            <span k-event-template class='custom-event'>{{dataItem.title}}</span>
            
            <div k-all-day-event-template class='custom-all-day-event'>{{dataItem.title}}</div>
      
        </div>
 

<style>
    .custom-event {
        color: #fff;
        text-shadow: 0 1px 0 #000;
    }
    .custom-all-day-event {
        text-align: center;
        text-transform: uppercase
    }
</style>


<script id="event-template" type="text/x-kendo-template">
	<div class="movie-template">
		
		<p>
			开始时间：#: kendo.toString(start, "HH:mm") #
			编号：#: kendo.toString(id, "HH:mm") #
		</p>
		<p>
			结束时间：#: kendo.toString(end, "HH:mm") #
		</p>
		<h3>会议地点：#: title #</h3>
		<h3>会议地点：#: host #</h3>
	
	</div>
</script>

<script id="customEditorTemplate" type="text/x-kendo-template">
<form id="form" name="form">
<div class="k-edit-label"><label for="title">会议名称</label></div>
	<div data-container-for="title" class="k-edit-field">
	
	<input type="text" class="k-input k-textbox"  ng-model="rbName" id="rbName" name="rbName" data-val="true" data-val-required="必填" >
</div>

	<div class="k-edit-label"><label for="title">会议室地点</label></div>
	<div data-container-for="title" class="k-edit-field">
		 <select ng-model="mrID" name="mrID" id="mrID" style="width: 40%">
			<option ng-repeat="x in vm.meeting" value="{{x.id}}">{{x.addr}}</option>
		</select>
	</div>
	<div class="k-edit-label"><label for="title">会议类型</label></div>
	<div data-container-for="title" class="k-edit-field">
		 <select id="type" name="rbType"ng-model="rbType" required>
                 <option value="">未选择</option>
                 <option value="1">其他会议</option>
				<option value="2">紧急会议</option>
				<option value="3">办公会议</option>
            </select>
	</div>
	<div class="k-edit-label"><label for="title">会议主持人</label></div>
	<div data-container-for="title" class="k-edit-field">
		<input type="text" class="k-input k-textbox"  name="host" gn-model="host" required="required" >
	</div>
	
	<div class="k-edit-label"><label for="title">会议预定人</label></div>
	<div data-container-for="title" class="k-edit-field">
		<input type="text" class="k-input k-textbox" value="${user}"  name="dueToPeople" required="required" >
	</div>

	<div class="k-edit-label"><label for="title">会议日期</label></div>
	<div data-container-for="title" class="k-edit-field">
		
		<input id="rbDay"type="text" data-type="date" data-format="yyyy-MM-dd"   data-bind="value:start,invisible:isAllDay"  data-role="datetimepicker"  name="rbDay" ng-model="rbDay"  />
	
	</div>
	<div class="k-edit-label">
		<label for="start">开始时间</label>
	</div>
	<div data-container-for="start" class="k-edit-field">
		<input id="beginTime"type="text" data-type="date" data-format="yyyy-MM-dd HH:mm"  data-bind="value:start,invisible:isAllDay"  data-role="timepicker"  name="beginTime" ng-model="beginTime"  />
		<span data-bind="text: endTimezone"></span>
		<span data-bind="text: startTimezone, invisible: endTimezone"></span>
		<span data-for="beginTime" class="k-invalid-msg" style="display: none;"></span>
	
	</div>

	<div class="k-edit-label"><label for="end">结束时间</label></div>
	<div data-container-for="end" class="k-edit-field">
		<input type="text" id="endTime" data-type="date" data-format="yyyy-MM-dd HH:mm" ng-onchange="startEnd()" data-bind="value:end,invisible:isAllDay" data-role="timepicker"  name="endTime" ng-model="endTime"data-datecompare-msg="End date should be greater than or equal to the start date" />
		<span data-bind="text: endTimezone"></span>
		<span data-bind="text: startTimezone, invisible: endTimezone"></span>
		<span data-for="end" class="k-invalid-msg" style="display: none;"></span>
	</div>
	<div class="k-edit-label"><label for="description">主要内容</label></div>
	<div data-container-for="description" class="k-edit-field">
		<textarea name="content"ng-model="content" class="k-textbox" data-bind="value:content"></textarea>
	</div>
	<div class="k-edit-label"><label for="description">备注</label></div>
	<div data-container-for="description" class="k-edit-field">
		<textarea name="remark"ng-model="remark" class="k-textbox" data-bind="value:remark"></textarea>
	</div>

	<form>
</script>