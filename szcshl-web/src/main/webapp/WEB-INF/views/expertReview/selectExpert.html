<#assign path=request.contextPath/>
<meta charset="UTF-8">
<div ng-include src="'${path}/contents/app/common/dialog-alert.tmpl.html'"></div>
<div ng-include src="'${path}/contents/app/common/dialog-confirm.tmpl.html'"></div>

<div class="well well-sm" style="background:white;">
    <ol class="breadcrumb">
        <li class="active">专家抽取</li>
    </ol> 
    <div class="toolbar">
        <a class="btn btn-sm btn-primary" ng-click="back();" ng-disabled="vm.iscommit"><span class="glyphicon glyphicon-chevron-left"></span>返回</a>
    </div>

    <!-- S 专家随机抽取 DIV -->
    <div class="toolbar" style="min-height: 200px;">
        <p>
            <span>1、OA系统随机抽取专家方案</span>
        </p>
    </div>
    <!-- E 专家随机抽取 DIV -->

    <!-- S 专家自选 DIV -->
    <div class="toolbar" style="min-height: 200px;">
        <!-- S 隐藏表单 设置排除已选择的ID -->
        <form id="selfSelExpertForm" >
            <input name="expertID" ng-model="vm.excludeIds"  type="text" ng-hide="true" operator="ni" value="">
            <input name="state"  type="text" ng-hide="true" operator="in" value="2,3">
            <!-- 专家规避-->
            <input name="comPany" ng-model="vm.bulidComPany"  type="text" ng-hide="true" operator="ne" value="">
            <input name="comPany" ng-model="vm.designComPany"  type="text" ng-hide="true" operator="ne" value="">
        </form>
        <!-- E 隐藏表单 设置排除已选择的ID -->
        <p>
         	<span>2、专家自选</span>
         	<button class="btn btn-xs btn-success"  ng-click="vm.showSelfExpertGrid()" ><span class="glyphicon glyphicon-ok"></span>添加</button>
            <button class="btn btn-xs btn-danger"  ng-click="vm.delertSelfExpert()" ng-disabled="vm.iscommit" ><span class="glyphicon glyphicon-remove"></span>删除</button>
        </p>
        <!-- S 自选专家列表 -->		
		<table class="table table-bordered" >
		  <tr>
              <td width="5%" align="center" ><input type='checkbox' ng-model="selectExpertList" /></td>
              <td width="10%" align="center" >姓名</td>
		    <td width="15%" align="center" >工作单位</td>
		    <td width="10%" align="center" >职务/职称</td>
		    <td width="10%" align="center" >专业</td>
		    <td width="15%" align="center" >联系电话</td>
		    <td width="10%" align="center" >专家类别</td>
		    <td width="20%" align="center" >备注</td>
		  </tr>
		  <tr ng-repeat="x in vm.selfExperts track by $index">
              <td align="center"> <input type="checkbox" name="seletedEp" ng-checked="selectExpertList" value="{{x.expertID}}"/></td>
		    <td align="center">{{x.name}}</td>
		    <td align="center">{{x.comPany}}</td>
		    <td align="center">{{x.job}}/{{x.post}}</td>
		    <td align="center">{{x.majorStudy}}、{{x.majorWork}}</td>
		    <td align="center">{{x.userPhone}}</td>
		    <td align="center">{{x.expeRttype}}</td>
		    <td align="center">{{x.remark}}</td>
		  </tr>
		</table>
		<!-- E 自选专家列表  --> 
		
		<div id="selfExpertDiv" class="well well-sm" style="display:none;">
			<div class="toolbar">
				<button class="btn btn-sm btn-success" ng-disabled="vm.iscommit" ng-click="vm.saveSelfExpert()" ><span class="glyphicon glyphicon-ok"></span>保存</button>   
				<span class="errors" id="selfExpertError"></span>     
    		</div> 
			<div id="selfExpertGrid" class="grid" kendo-grid="grid" k-options="vm.selfExpertOptions"></div>
		</div>          
    </div>
    <!-- E 专家自选 DIV -->


    <!-- S 自选新专家、市外、境外专家 DIV -->
    <div class="toolbar" style="min-height: 200px;">
        <!-- S 隐藏表单 设置排除已选择的ID -->
        <form id="outSelExpertForm" >
            <input name="expertID" ng-model="vm.excludeIds"  type="text" ng-hide="true" operator="ni" value="">
            <!-- 专家规避-->
            <input name="comPany" ng-model="vm.bulidComPany"  type="text" ng-hide="true" operator="ne" value="">
            <input name="comPany" ng-model="vm.designComPany"  type="text" ng-hide="true" operator="ne" value="">
        </form>
        <!-- E 隐藏表单 设置排除已选择的ID -->
        <p>
            <span>3、自选新专家、市外、境外专家</span>
            <button class="btn btn-xs btn-success"  ng-click="vm.showOutExpertGrid()" ><span class="glyphicon glyphicon-ok"></span>添加</button>
            <button class="btn btn-xs btn-danger"  ng-click="vm.delertOutSelfExpert()" ng-disabled="vm.iscommit" ><span class="glyphicon glyphicon-remove"></span>删除</button>
        </p>  
        <!-- S 自选专家列表 -->	 	
		<table class="table table-bordered" >
		  <tr>
              <td width="5%" align="center" ><input type='checkbox' ng-model="selectOutExpertList" />
		    <td width="10%" align="center" >姓名</td>
		    <td width="15%" align="center" >工作单位</td>
		    <td width="10%" align="center" >职务/职称</td>
		    <td width="10%" align="center" >专业</td>
		    <td width="15%" align="center" >联系电话</td>
		    <td width="10%" align="center" >专家类别</td>
		    <td width="20%" align="center" >备注</td>
		  </tr>
		  <tr ng-repeat="x in vm.outsideExperts">
              <td align="center"> <input type="checkbox" name="seletedOutEp" ng-checked="selectOutExpertList" value="{{x.expertID}}"/></td>
		    <td align="center">{{x.name}}</td>
		    <td align="center">{{x.comPany}}</td>
		    <td align="center">{{x.job}} {{x.post}}</td>
		    <td align="center">{{x.majorStudy}} {{x.majorWork}}</td>
		    <td align="center">{{x.userPhone}}</td>
		    <td align="center">{{x.expeRttype}}</td>
		    <td align="center">{{x.remark}}</td>
		  </tr>
		</table>
		<!-- E 自选专家列表  -->

        <div id="outExpertDiv" class="well well-sm" style="display:none;">
            <div class="toolbar">
                <button class="btn btn-sm btn-success" ng-disabled="vm.iscommit" ng-click="vm.saveOutExpert()" ><span class="glyphicon glyphicon-ok"></span>保存</button>
                <span class="errors" id="outExpertError"></span>
            </div>
            <div id="outExpertGrid" class="grid" kendo-grid="grid" k-options="vm.outExpertOptions"></div>
        </div>
    </div>
    <!-- E 自选新专家、市外、境外专家 DIV -->
</div>

<!--评审方案拟聘请专家列表-->
<div class="well well-sm" style="background:white;">
    <p class="h4" style="margin: 10px 0px 0px 20px;">附件一</p>
    <table class="table table-bordered" >
        <caption class="text-center h3"><strong>拟聘请专家名单</strong></caption>
        <tr>
            <td width="10%" align="center" >姓名</td>
            <td width="15%" align="center" >工作单位</td>
            <td width="10%" align="center" >职务/职称</td>
            <td width="10%" align="center" >专业</td>
            <td width="15%" align="center" >联系电话</td>
            <td width="10%" align="center" >专家类别</td>
            <td width="20%" align="center" >备注</td>
        </tr>

        <tr ng-repeat="x in vm.selectExperts track by $index">
            <td align="center">{{x.name}}</td>
            <td align="center">{{x.comPany}}</td>
            <td align="center">{{x.job}}/{{x.post}}</td>
            <td align="center">{{x.majorStudy}}、{{x.majorWork}}</td>
            <td align="center">{{x.userPhone}}</td>
            <td align="center">{{x.expeRttype}}</td>
            <td align="center">{{x.remark}}</td>
        </tr>
    </table>
</div>
