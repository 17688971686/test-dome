<meta charset="UTF-8">
<div class="toolbar">
    <button class="btn btn-sm btn-success" ng-click="vm.commitNextStep()" ng-disabled="vm.disabledButton"   ng-show="vm.isHaveNext" ng-hide="vm.isOverStep"><span class="glyphicon glyphicon-ok"></span>提交下一步</button>
	<button class="btn btn-sm btn-danger" ng-click="vm.commitBack()" ng-disabled="vm.disabledButton"><span class="glyphicon glyphicon-chevron-left"></span>回退</button>
	<button class="btn btn-sm btn-success" ng-click="vm.commitOver()" ng-disabled="vm.disabledButton" ng-hide="vm.isHaveNext" ng-show="vm.isOverStep" ><span class="glyphicon glyphicon-remove"></span>结束流程</button>
	<!-- 业务按钮 -->
	<button class="btn btn-sm btn-primary" ng-click="vm.addWorkProgram()" ng-disabled="vm.commitWorkProgram" ng-hide="vm.hideWorkBt()" ng-show="vm.showWorkBt" ><span class="glyphicon glyphicon-edit"></span>工作方案</button>
</div>
<div class="well well-sm" style="background:white;" >
	<form id="flow_form" name="flow_form" >
	<input type="hidden" ng-model="vm.flow.taskId" value="{{vm.flow.taskId}}" /> <!-- hidden taskId -->
	<input type="hidden" ng-model="vm.flow.processInstanceId" value="{{vm.flow.processInstanceId}}" /><!-- hidden processInstanceId -->
	<input type="hidden" ng-model="vm.flow.nextGroup" value="{{vm.flow.nextGroup}}" />	
	
	<input type="hidden" ng-model="vm.flow.curNodeAcivitiId" value="{{vm.flow.curNodeAcivitiId}}" />	
	
	<table class="table table-bordered">
		  <caption class="h5">流程处理</caption>
		  <tbody>
		    <tr>
		      <td width="15%" class="text-center">本环节名称</td>
		      <td>
		      		{{vm.flow.curNodeName}}		      		
			  </td>
			</tr>				
		    <tr>
		      <td width="15%" class="text-center">处理意见</td>
		      <td>
		      		<textarea rows="3" ng-model="vm.flow.dealOption" name="dealOption" id="dealOption" style="width:100%" data-val="true" data-val-required="处理意见不能为空！" data-val-length-max="2000"></textarea> 
			  		<span data-valmsg-for="dealOption" data-valmsg-replace="true" class="errors"></span>
			  </td>
			</tr>	
			<tr>
		      <td width="15%" class="text-center">下一环节名称</td>
		      <td>
		      		<select ng-model="vm.flow.nextNodeAcivitiId" name="nextNodeAcivitiId" id="nextNodeAcivitiId">
						<option ng-repeat="n in vm.nextNode" value="{{n.activitiId}}">{{n.activitiName}}</option>
					</select>		 		      		
			  </td>
			</tr>			
			<tr> 
		      <td width="15%" class="text-center">下一步环节处理人</td>
		      <td>
					<select ng-model="vm.flow.nextDealUser" name="nextDealUser" id="nextDealUser">
						<option ng-repeat="u in vm.nextDealUserList" value="{{u.loginName}}">{{u.displayName}}</option>
					</select>
			  </td>
		    </tr>
		</tbody>
	</table>
	</form>		    
</div>